#Область ПрограммныйИнтерфейс

Функция СписокКассОФДПоОрганизации(ОтборОрганизация)  Экспорт
	Возврат Обработки.ЗагрузкаИзОФД.СписокНастроекКассОФД(ОтборОрганизация);
КонецФункции

Процедура УстановитьАвтоматическийПериодЗагрузки(ИдентификаторУстройства) Экспорт
	УстановитьПривилегированныйРежим(Истина);
	
	ДанныеУстройства = МенеджерОфлайнОборудованияВызовСервера.ДанныеУстройства(ИдентификаторУстройства);
	Если ДанныеУстройства.Параметры.ПериодИзмененВручную = ЛОЖЬ Тогда
		Возврат;
	КонецЕсли;
	
	ДанныеУстройства.Параметры.ПериодИзмененВручную = Ложь;
	
	РезультатЗавершения = МенеджерОфлайнОборудованияВызовСервера.СохранитьПараметрыУстройства(ИдентификаторУстройства, ДанныеУстройства.Параметры);
	УстановитьПривилегированныйРежим(Ложь);
	
	Если РезультатЗавершения Тогда 
		ОбновитьПовторноИспользуемыеЗначения();
	Иначе
		СообщениеОбОшибке = НСтр("ru='Не удалось сохранить параметры устройства.'");
		ОбщегоНазначения.СообщитьПользователю(СообщениеОбОшибке);
	КонецЕсли;
КонецПроцедуры

Функция УстановитьПараметрыУстройства(ДатаЗагрузки, ИдентификаторУстройства) Экспорт
	Возврат Обработки.ЗагрузкаИзОФД.УстановитьПараметрыУстройства(ДатаЗагрузки, ИдентификаторУстройства)
КонецФункции  

Функция ЕстьНастройкиПоНесколькимОрганизациям() Экспорт
	Запрос = Новый Запрос;
	
	Запрос.Текст = 
	"ВЫБРАТЬ РАЗРЕШЕННЫЕ
	|	ИСТИНА КАК ЕстьНастройкиПоНесколькимОрганизациям
	|ИЗ
	|	РегистрСведений.НастройкиКассОФД КАК НастройкиКассОФД
	|
	|ИМЕЮЩИЕ
	|	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ НастройкиКассОФД.Касса.Организация) > 1";
	
	Возврат НЕ Запрос.Выполнить().Пустой();
КонецФункции


#КонецОбласти